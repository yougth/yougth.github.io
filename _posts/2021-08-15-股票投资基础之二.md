---
layout:     post
title:      股票投资基础之二
subtitle:   企业估值
date:       2021-08-15
author:     BY
header-img: img/post-bg-universe.jpg
catalog: true
tags:
    - 投资
    - 商业模型
    - 护城河
    - 估值
---

前面第一篇[商业模式和护城河](http://yougth.top/2021/05/07/%E8%82%A1%E7%A5%A8%E6%8A%95%E8%B5%84%E5%9F%BA%E7%A1%80%E4%B9%8B%E4%B8%80)，讲到了投资首要是看懂企业的商业模式和护城河，如看懂了前面一项，那么第二项要做的就是评估这个企业值真正值多少钱，以确定我到底要多少钱买这个企业才是合适的，这里面主要就涉及到估值。

首先看一个公式：股票市值 = 市盈率 * 净利润。

而股市里面你赚钱大体也是来自这两个方面，要么是企业净利润增长率，要么是市盈率变高了；净利润是其中的可控项目，是我们要通过估值解决的问题；而市盈率是市场上所有人买卖给股票投票决定的，属于不可控因素，只可利用不可期待。

我们真正赚的是股票市值提升的钱，但是我们依然要知道这个股票本身值多少钱，也就是说心中要有自己的锚，才不会在股价日常波动的时候被牵着鼻子走，这就是估值要解决的问题。

### 现金流折现法

首先，金钱是有时间效应的，今天的一块钱和一年后的一块钱的本身价值是不同的，而现金流折现法就是计算未来的钱折线到现在的价值，其实本质是现在的钱结算未来无风险利率之后的价值的反向。

首先需要有一个贴现率，折现率一般是无风险利率，即把钱存在银行保本一年期的理论，假设为x = 0.04。

则折现公式为

$$
p = \frac{val}{(1 + x)^n}
$$

其中p为折现回来价值，val是未来价值，x是折现率，举个例子，一年后的100元，现在价值为100/(1.04) = 96.15，两年后的100元，现在价值为100/(1.04 * 1.04) = 92.45。如果让你选现在给你96块钱和一年后给你100块钱，我猜很多人会选现在的96块钱把，毕竟这是确定的事情，也是金钱的时间价值。


### 现金流折线模型

前面说了金钱的时间效应，现在我们来说说具体怎么给企业估值，其基本思想是计算企业在生命周期内赚的现金流然后折线到现在的价值，用公式表示为：

$$
P = \sum_{t=1}^n \frac{D_t}{(1+r)^t}
$$

其中P就是现在的价值，n是企业的存活年数，t是第t年，$$D_t$$表示企业第t年的产生的自由现金流，r是贴现率。

其实本质是前面现金流贴现法的求和版本，当然这里面有很多参数需要估计，比如n估计为多少，贴现率应该是多少，每一年产生的自由现金流是多少。

上面公司还可以做如下化简，称为戈登公式

$$
P = \sum_{t=1}^n \frac{D* (1+g)^{t-1}}{(1+r)^t}
$$

其中多了一个g，这个g称为现金流增长率，或者也称为股息增长率，大致化简思路为，假设企业现金流增长是稳定为g，我们又看到这个求和每一项相比前一项是一个典型的等比数列，应用等比数列求和公式，继续化简为

$$
P = \frac{D}{(r - g)}
$$

其中上面自由现金流的计算公式为

$$
自由现金流(D) = 税后净利润 + 非现金支出 + 利息费用 - 资本性支出 - 营运资本增加量
$$

其本质就是企业刨除掉日常运营的钱，剩下来的可以自由支配的钱。

而在实际使用中，又分为三段式和两段式的，三段式的，把企业分为高速增长期，低速增长期，后一段是大致估算剩余价值。而两段式就是高速和低速放到一起，作为可准确估计价值。公司进一步简化为

$$
价值P = \sum_{i=1}^{n} 准确估计现金流折线_i + \frac{自由现金流}{折现率-永续增长率}
$$

这里n一般是3-5年，假设茅台未来三年的利润为500，600，700，假设无风险利率为5%，股票额外风险3%，使用两段式现金流折线模型

1. 计算前三年（2022-2024）利润折线加总，为500/1.08 + 600/1.08^2 + 700/1.08^3 = 462.9 + 537.4 + 555.6 = 1556亿
2. 计算出2024年整体出售茅台的合理值，假设2024年后茅台永续增长率即前面公式里面的g=5%，把它视为理财产品出售价值=700 * 1.05 / （8% - 5%） = 24500，折线到现在24500 / (1.08^4) = 18008亿
3. 加和得到总价值为19564亿

### 简化老唐估值法

看完了复杂的课本公式，我们来看个更实用的简易版本，唐朝是巴菲特的忠实信徒，在唐书房写过自己的估计方法，整体很简单易学，一句话

> 三年后以15-25倍市盈率卖出能赚100%的位置就可以买入，高杠杆企业打七折。

看完不是觉得有点意思，他其实是更进一步做了简化，既然生命周期内难以估计，那我估计三年总难度小一些吧，只要估计出来三年后的估值，然后折回来看现在确定性多大，如果确定性很大，就可以买。虽然买企业是永久的思维，但是估计只估确定性比较高的三年。

这里还有一个是15-25倍市盈率，为什么是这个数字，我们知道，市盈率=股价/每股收益，或者换种写法市盈率 = 总市值/净利润，即按照当前每年的利润，公司需要多少年能赚到当前的市值，20就代表公司需要20年就能够挣够当前的市值。从另一个角度说，反过来净利润/市值就是当前公司的收益率，所以等价于市盈率的倒数是收益率。

那么15-25的市盈率代表的收益率为4%~6.67%，我们日常在银行买的保本理财产品大概就是这个收益率，所以老唐的估值思路是按照理财产品的思路估值的，够保守了吧，用巴菲特的话说是有安全边际。

按照老唐估值法我们依然估一下茅台，2024年净利润为700亿，对应25-30倍市盈率，内在价值区间为17500～21000，获取100%利润打折一半到现在为8750～10500，折合每股696.7～836。

因为是茅台，所以对市盈率调高为了25～30，另外估计和前面现金流折现法差异不大，所以可以说是一种简化，适合口算。

### 实际中如何估值

在2002年股东大会上，有人问巴菲特“您平时用什么估值指标？”，巴菲特的回答是:

> **生意的合理估值水平是和标普500指数相比较的结果，取决于生意的净资本回报率(PEG)和增量资本回报率**
>
>  我不会只盯着PE这样的指标看，我不认为PE、PB、PS这些指标能告诉你什么有价值的信息
>
> 人们想要一个计算公式，但这并不容易。
>
> 想要对某门生意估值，你需要知道它从现在开始到永远的自由现金流量，然后把他们按照一个合理的折扣折现回来。
>
> **金钱都是一样的(All cash is equal),你需要评估这门生意的经济特质。**

这里有两个重要的信息，一个是第一段，生意的合理估值是和标普500指数相比的结果，什么意思呢？我们投资的对比基准是标普500指数，那么要做得到就是选出来比标普500均值更好的公司。在我看来投资收益率依次从高到底是非常优秀的上市公司(茅台等) > 纳入指数的上市公司 > 平均上市公司 > 全体企业均值（社会GDP） > 无风险利率 > 持有现金。这也是为什么巴菲特那么推崇指数的原因，因为它是普通人能得到的最高的收益了。

另一个是最后一点，All cash is
equal，是什么意思呢，金钱都是一样的，我有100w，我现在就懂两个企业，茅台和招商银行，我能确定茅台未来的发展各方面都是好于招商银行的，那么我就应该把前投入到茅台里面。本质就是一切都是比较的结果，在你懂的(能力圈)里面找确定性高的生意，每次持仓变换都是这个逻辑，只是因为你比较完觉得另一个确定性更高，可预期的未来的收益更大，跟你的成本、持仓多久、持有现金量的多少都没有关系。


### 总结

到这里是不是已经很明确，其实估计只是个思维方式，不是说我要真的上去套公式去估计，巴菲特也不会这么做，按照现金流折现模型，里面有那么多估计项，一个错了，千差万别，所以巴菲特又说：“**宁要模糊的正确，不要精确的错误**”。

那么我们要做的是什么呢？要做不是看到企业就上去套公式，而是慢慢的搞懂它，或者每天搞懂一点点，直到彻底搞懂了，然后去比较，All cash is equal,都是比较的结果，估值公式只是让你心中有一个大致的锚，不至于因为市场的波动而打乱你的节奏，仅此而已。

[//]: 护城河的顺序

[comment]: <> (This is a comment, it will not be included)
[comment]: <> (in  the output file unless you use it in)
[comment]: <> (a reference style link.)
[//]: <> (This is also a comment.)
[//]: # (This may be the most platform independent comment)




